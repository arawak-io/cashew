<!DOCTYPE html>
<html ng-app="cashew">
<head>
	<title>Deployd login form</title>
	<link rel="stylesheet" href="lib/lumx/dist/lumx.css">
  <link rel="stylesheet" href="lib/mdi/materialdesignicons.css">
	<link rel="stylesheet" href="css/theme.css">

  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
</head>
<body>
  <div class="container">



			<div class="mt++" flex-container="row" flex-gutter="24">
					<div flex-item>
							<form>
									<lx-text-field label="Email" fixed-label="true" icon="email">
											<input type="text" id="username" ng-model="textFields.fixedFirstName">
									</lx-text-field>

									<lx-text-field label="Password" fixed-label="true" icon="lock">
											<input type="password" id="password" ng-model="textFields.password">
									</lx-text-field>
									<button type="submit" class="btn btn--m btn--blue btn--raised" lx-ripple>Login</button>
									<button class="btn btn--m btn--blue btn--flat" lx-ripple>
									<a href="/register.html">sign up</a></button>
							</form>
					</div>
				</div>



  </div>
	<script src="lib/jquery/dist/jquery.js"></script>
	<script src="lib/velocity/velocity.js"></script>
	<script src="lib/moment/min/moment-with-locales.js"></script>
	<script src="lib/angular/angular.js"></script>
	<script src="lib/lumx/dist/lumx.js"></script>
  <script type="text/javascript" src="/dpd.js"></script>
	<script type="text/javascript" src="/js/global.js"></script>
  <script type="text/javascript">
    dpd.users.me(function(user) {
      if (user) {
        location.href = "/welcome.html";
      }
    });

    $('form').submit(function() {
      var username = $('#username').val();
      var password = $('#password').val();

      dpd.users.login({username: username, password: password}, function(session, error) {
        if (error) {
          alert(error.message);
        } else {
          location.href = "/welcome.html";
        }
      });

      return false;
    });
  </script>
</body>
</html>
